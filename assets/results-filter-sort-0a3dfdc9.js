var at=(s,t,e)=>{if(!t.has(s))throw TypeError("Cannot "+e)};var i=(s,t,e)=>(at(s,t,"read from private field"),e?e.call(s):t.get(s)),c=(s,t,e)=>{if(t.has(s))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(s):t.set(s,e)},g=(s,t,e,r)=>(at(s,t,"write to private field"),r?r.call(s,e):t.set(s,e),e);import{i as nt}from"./pagination-982e48d2.js";var ct=":host{display:inline-block;margin:2px;width:129px;-webkit-tap-highlight-color:transparent;--0: var(--track-height, 0.5rem);--1: var(--thumb-diameter, 1rem);--2: var(--track-color, rgb(239, 239, 239));--3: var(--track-color-active, rgb(229, 229, 229));--4: var(--2);--5: var(--3);--6: var(--track-color-disabled, rgb(250, 250, 250));--7: var(--progress-color, rgb(0, 117, 255));--8: var(--progress-color-active, rgb(0, 92, 200));--9: var(--progress-color-disabled, rgb(203, 203, 203));--a: var(--thumb-color, rgb(0, 117, 255));--b: var(--thumb-color-active, rgb(0, 92, 200));--c: var(--thumb-color-disabled, rgb(203, 203, 203));--d: var(--thumb-halo-color, rgba(0, 92, 200, 0.1));--e: var(--thumb-halo-size, 0.425rem);--f: var(--focus-outline, 1px solid black);--g: var(--focus-outline-offset, 0px);--h: var(--transition-duration, 100ms);--i: var(--transition-timing-function, ease-in);--j: pointer;--k: all}:host([disabled]){--j: default;pointer-events:none;--k: none;--2: var(--6);--7: var(--9);--a: var(--c)}[part=container]{display:grid;width:100%;cursor:var(--j)}@media(hover: hover){[part=container]:hover [data-input=min]{--7: var(--3)}[part=container]:hover [data-input=max]{--2: var(--3);--7: var(--8)}}[part=container]:focus-within [data-input=min]{--7: var(--3)}[part=container]:focus-within [data-input=max]{--2: var(--3);--7: var(--8)}input[type=range]{grid-area:1/1;margin:0;padding:0;width:100%;height:var(--1);max-width:100%;background:transparent;font:1em/1 arial,sans-serif;outline:none;cursor:var(--j);pointer-events:none;--range: calc(var(--max) - var(--min));--ratio: calc((var(--value) - var(--min)) / var(--range));--fill-width: calc(0.5 * var(--1) + var(--ratio) * (100% - var(--1)))}input[type=range],input[type=range]::-webkit-slider-thumb{-webkit-appearance:none}@media(hover: hover){input[type=range]:focus:not(:hover){outline:var(--f);outline-offset:var(--g)}}input[type=range]::-webkit-slider-runnable-track{box-sizing:border-box;border:none;width:100%;height:var(--0);background:var(--2);border-radius:calc(var(--0)/2);background:linear-gradient(var(--7), var(--7)) 0/var(--fill-width) 100% no-repeat var(--2)}input[type=range]::-moz-range-track{box-sizing:border-box;border:none;width:100%;height:var(--0);background:var(--2);border-radius:calc(var(--0)/2)}input[type=range]::-moz-range-progress{height:var(--0);background:var(--7);border-radius:calc(var(--0)/2)}input[type=range][data-input=min]::-moz-range-progress{border-top-right-radius:0px;border-bottom-right-radius:0px}input[type=range]::-webkit-slider-thumb{margin-top:calc(.5*(var(--0) - var(--1)));box-sizing:border-box;border:none;width:var(--1);height:var(--1);border-radius:50%;background:var(--a);box-shadow:var(--thumb-shadow);transition:all var(--h) var(--i);pointer-events:var(--k)}@media(hover: hover){input[type=range]::-webkit-slider-thumb:hover{--a: var(--b);--thumb-shadow: 0px 0px 0px var(--e) var(--d)}}input[type=range]::-moz-range-thumb{box-sizing:border-box;border:none;width:var(--1);height:var(--1);border-radius:50%;background:var(--a);box-shadow:var(--thumb-shadow);transition:all var(--h) var(--i);pointer-events:var(--k)}@media(hover: hover){input[type=range]::-moz-range-thumb:hover{--a: var(--b);--thumb-shadow: 0px 0px 0px var(--e) var(--d)}}input[type=range]:focus::-webkit-slider-thumb{--a: var(--b);--thumb-shadow: 0px 0px 0px var(--e) var(--d)}input[type=range]:focus::-moz-range-thumb{--a: var(--b);--thumb-shadow: 0px 0px 0px var(--e) var(--d)}input[type=range][data-input=min]{z-index:2;--7: var(--4);--2: transparent}input[type=range][data-input=max][data-at-min=true]{z-index:2}",H,R,V,z,I,B,F,q,f,w,$,X,v,D,C,G,W,j,ot;customElements.define("range-slider",(ot=class extends HTMLElement{constructor(){super();c(this,H,void 0);c(this,R,void 0);c(this,V,void 0);c(this,z,void 0);c(this,I,void 0);c(this,B,void 0);c(this,F,void 0);c(this,q,void 0);c(this,f,void 0);c(this,w,void 0);c(this,$,void 0);c(this,X,()=>{g(this,q,this.shadowRoot.querySelector('[part="container"]')),g(this,f,this.shadowRoot.querySelector('[data-input="min"]')),g(this,w,this.shadowRoot.querySelector('[data-input="max"]')),g(this,$,[i(this,f),i(this,w)]);let t=this.getAttribute("min"),e=this.getAttribute("max");if(!t||!e){this.shadowRoot.innerHTML="";return}if(this.min=Number(t),this.max=Number(e),isNaN(this.min)||isNaN(this.max)){this.shadowRoot.innerHTML="";return}let r=this.getAttribute("valueMin"),d=this.getAttribute("valueMax"),m=this.getAttribute("step"),p=Number(r),k=Number(d),P=Number(m);this.valueMin=r&&!isNaN(p)?p:this.min,this.valueMax=d&&!isNaN(k)?k:this.max,this.step=m&&!isNaN(P)?P:1,this.midpoint=(this.valueMax-this.valueMin)/2+this.valueMin;let U=this.getAttribute("disabled"),_=U===""||U==="true";this.disabled=_,i(this,$).forEach((x,J)=>{i(this,v).call(this,x,"min",this.min),i(this,v).call(this,x,"max",this.max),i(this,v).call(this,x,"step",this.step),i(this,v).call(this,x,"value",J===0?this.valueMin:this.valueMax),x.addEventListener("change",i(this,D)),x.addEventListener("input",i(this,D)),x.addEventListener("touchstart",i(this,W))}),i(this,q).addEventListener("mousedown",i(this,G)),i(this,q).addEventListener("click",i(this,G)),this.addEventListener("mouseup",i(this,j)),this.addEventListener("touchend",i(this,j)),this.ready=!0,this.dispatchEvent(new CustomEvent("ready",{detail:this.current}))});c(this,v,(t,e,r)=>{t[e]=r;let d=e==="value"?t.valueAsNumber:r;t.style.setProperty(`--${e}`,d),t.dataset.input==="max"&&e==="value"&&(t.dataset.atMin=r===this.min)});c(this,D,t=>{t.stopPropagation();let e=t.target,r=e.dataset.input==="min",d=e.valueAsNumber,m=r?Math.min(d,this.valueMax):Math.max(d,this.valueMin);i(this,v).call(this,e,"value",m);let p={min:this.min,max:this.max,step:this.step,valueMin:r?m:this.valueMin,valueMax:r?this.valueMax:m};this.dispatchEvent(new CustomEvent("input",{detail:p})),t.type==="change"&&(i(this,v).call(this,e,"value",m),r?this.valueMin=m:this.valueMax=m)});c(this,C,!1);c(this,G,t=>{if(t.button!==0)return;if(t.stopPropagation(),t.type==="click"&&i(this,C)){g(this,C,!1);return}t.type==="mousedown"&&g(this,C,!0);let e=(t.offsetX===0&&t.offsetY===0?t.layerX-t.target.offsetLeft:t.offsetX)/t.target.offsetWidth,r=(this.midpoint-this.min)/(this.max-this.min),d=e*(this.max-this.min)+this.min,m=e<r,p=m?i(this,f):i(this,w);i(this,v).call(this,p,"value",d);let k={min:this.min,max:this.max,step:this.step,valueMin:m?p.valueAsNumber:this.valueMin,valueMax:m?this.valueMax:p.valueAsNumber};this.dispatchEvent(new CustomEvent("input",{detail:k}))});c(this,W,t=>{let e=t.path?t.path:t.composedPath();!Array.isArray(e)||Array.length<1||e[0].focus()});c(this,j,t=>{this.blur(),i(this,f).blur(),i(this,w).blur(),this.valueMin=i(this,f).valueAsNumber,this.valueMax=i(this,w).valueAsNumber});let t=this.attachShadow({mode:"open"}),e=document.createElement("template");e.innerHTML='<div part="container"><input type="range" data-input="min"><input type="range" data-input="max"></div>';let r=document.createElement("style");r.innerHTML=ct,t.appendChild(r),t.appendChild(e.content.cloneNode(!0))}static get observedAttributes(){return["disabled"]}get min(){return i(this,H)}set min(t){let e=Number(t);g(this,H,e),this.setAttribute("min",e),i(this,v).call(this,i(this,f),"min",e),i(this,v).call(this,i(this,w),"min",e)}get max(){return i(this,R)}set max(t){let e=Number(t);g(this,R,e),this.setAttribute("max",e),i(this,v).call(this,i(this,f),"max",e),i(this,v).call(this,i(this,w),"max",e)}get step(){return i(this,V)}set step(t){g(this,V,t),this.setAttribute("step",t),i(this,v).call(this,i(this,f),"step",t),i(this,v).call(this,i(this,w),"step",t)}get disabled(){return i(this,z)}set disabled(t){if(typeof t=="boolean")if(g(this,z,t),i(this,f).disabled=t,i(this,w).disabled=t,t===!0){let e=this.getAttribute("disabled");e!==""&&e!=="true"&&this.setAttribute("disabled","")}else this.removeAttribute("disabled")}get valueMin(){return i(this,I)}set valueMin(t){let e=Number(t);e!==this.valueMin&&(e<this.min&&(e=this.min),g(this,I,e),this.setAttribute("valueMin",e),i(this,v).call(this,i(this,f),"value",e),this.midpoint=(this.valueMax-this.valueMin)/2+this.valueMin,this.ready&&this.dispatchEvent(new CustomEvent("change",{detail:this.current})))}get valueMax(){return i(this,B)}set valueMax(t){let e=Number(t);e!==this.valueMax&&(e>this.max&&(e=this.max),g(this,B,e),this.setAttribute("valueMax",e),i(this,v).call(this,i(this,w),"value",e),this.midpoint=(this.valueMax-this.valueMin)/2+this.valueMin,this.ready&&this.dispatchEvent(new CustomEvent("change",{detail:this.current})))}get midpoint(){return i(this,F)}set midpoint(t){g(this,F,Number(t))}get current(){return{min:this.min,max:this.max,step:this.step,valueMin:this.valueMin,valueMax:this.valueMax}}connectedCallback(){!this.isConnected||i(this,X).call(this)}attributeChangedCallback(t,e,r){if(!(!this.isConnected||!this.ready)&&t==="disabled"){let d=r===""||r==="true";this.disabled=d}}},H=new WeakMap,R=new WeakMap,V=new WeakMap,z=new WeakMap,I=new WeakMap,B=new WeakMap,F=new WeakMap,q=new WeakMap,f=new WeakMap,w=new WeakMap,$=new WeakMap,X=new WeakMap,v=new WeakMap,D=new WeakMap,C=new WeakMap,G=new WeakMap,W=new WeakMap,j=new WeakMap,ot));const ht=(s,t=[])=>{const e=[];for(const[r,d]of s)(d===""||t.some(p=>p.key===r&&(!p.value||p.value===d)))&&e.push(r);return e.forEach(r=>s.delete(r)),s.toString()},o={resultsNavbar:"[data-results-navbar]",resultsGrid:"[data-results-grid]",pagination:"[data-results-pagination]",filterToggle:"[data-results-filter-toggle]",filterDrawer:"[data-results-filter-drawer]",filterHeader:"[data-results-filter-header]",filterContent:"[data-results-filter-content]",filterClearLink:"[data-results-filter-clear-link]",filterPriceRangeSlider:"[data-results-filter-price-range-slider]",filterPriceRangeMin:"[data-results-filter-price-range-min]",filterPriceRangeMax:"[data-results-filter-price-range-max]",filterFooter:"[data-results-filter-footer]",layoutSwitchButton:"[data-results-layout-switch]",productViewSwitchButton:"[data-results-product-view-switch]",resultsSortToggle:"[data-results-sort-toggle]",resultsSortList:"[data-results-sort-list]"},h={isHidden:"is-hidden",isVisible:"is-visible",isSelected:"is-selected",filterIsVisible:"filter-is-visible",formSubmitted:"navbar-form-submitted",hide:"hide",sortIsVisible:"sort-is-visible"},pt=(s,t)=>{const e=s.dataset.defaultSortBy||"manual",r=s.querySelector(o.resultsGrid),d=s.querySelector(o.resultsNavbar),m="alt";let p=window.sessionStorage.getItem("resultsLayoutView");const k="model";let P=window.sessionStorage.getItem("resultsProductView");U(),nt(t),x(),J();function U(){if(!d||!r)return;const u=s.querySelector(o.filterDrawer),b=s.querySelectorAll(o.filterHeader),S=s.querySelectorAll(o.filterContent),A=s.querySelector(o.filterFooter),O=s.querySelectorAll(o.pagination),K=async(a,n=!1)=>{const y=`${window.location.pathname}?section_id=${t}&${a}`;try{const l=await fetch(y);if(l.ok===!1)throw new Error(`Fetch "${t}" section response was not OK`);const E=await l.text(),L=new DOMParser().parseFromString(E,"text/html");r.innerHTML=L.querySelector(o.resultsGrid).innerHTML,document.body.classList.remove(h.formSubmitted),b&&b.forEach((M,N)=>{const T=L.querySelectorAll(o.filterHeader);M.innerHTML=T[N].innerHTML}),S&&S.forEach((M,N)=>{if(n&&M===n)return;const T=L.querySelectorAll(o.filterContent);M.innerHTML=T[N].innerHTML}),A&&(A.innerHTML=L.querySelector(o.filterFooter).innerHTML),O&&(O.forEach((M,N)=>{const T=L.querySelectorAll(o.pagination);M.innerHTML=T[N].innerHTML}),nt(t)),history.replaceState({searchParams:a},"",`${window.location.pathname}${a&&"?".concat(a)}`),_(),p==="alt"&&Z(),u.classList.add(h.isHidden),u.classList.remove(h.isVisible),u.setAttribute("aria-hidden",!0),document.body.classList.remove(h.filterIsVisible)}catch(l){window.console.error(l)}};function Z(){r.querySelectorAll("img").forEach(n=>{n.sizes=r.dataset.imageSizesAlt})}const tt=async a=>{a.preventDefault(),document.body.classList.add(h.formSubmitted);const n=new FormData(a.target.closest("form")),y=new URLSearchParams(n),l=[{key:"sort_by",value:e},{key:"products-per-page"}],E=s.querySelector(o.filterPriceRangeMin);E&&l.push({key:E.name,value:E.min});const L=s.querySelector(o.filterPriceRangeMax);L&&l.push({key:L.name,value:L.max});const M=ht(y,l),N=a.target.closest(o.filterContent);if(a.target.name==="products-per-page"){const lt=`${window.theme.locale&&!window.theme.locale.primary?window.theme.locale.rootUrl:""}/cart/update.js`,ut={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({attributes:{collection_products_per_page:a.target.value}})};try{await fetch(lt,ut)}catch(dt){window.console.error(dt)}}K(M,N)};d.addEventListener("submit",tt);const et=s.querySelector(o.resultsSortList);if(et&&et.querySelectorAll('input[type="radio"]').forEach(n=>{n.addEventListener("change",()=>{window.dispatchEvent(new Event("results-filter-sort:toggle-sort")),tt(event)})}),u){const a=y=>{y.target.closest(o.filterToggle)&&(u.classList.contains(h.isHidden)?(u.classList.remove(h.isHidden),u.classList.add(h.isVisible),u.setAttribute("aria-hidden",!1),document.body.classList.add(h.filterIsVisible)):(u.classList.add(h.isHidden),u.classList.remove(h.isVisible),u.setAttribute("aria-hidden",!0),document.body.classList.remove(h.filterIsVisible)))};d.addEventListener("click",a);const n=y=>{const l=y.target.closest(o.filterClearLink);if(!l)return;y.preventDefault();const E=l.href.split("?")[1]??"";K(E)};u.addEventListener("click",n)}S&&_();const Y=s.querySelectorAll(o.layoutSwitchButton);let it=!1;const rt=a=>{const n=a.dataset.resultsLayoutSwitch,y=Array.from(r.classList).filter(l=>l.includes("results-grid--"));r.classList.remove(...y),r.classList.add(`results-grid--${n}`),n==="alt"&&!it&&(Z(),it=!0),Y.forEach(l=>{l.setAttribute("aria-pressed","true"),l.removeAttribute("disabled"),l.classList.add(h.isSelected)}),a.setAttribute("disabled","disabled"),a.setAttribute("aria-pressed","false"),a.classList.remove(h.isSelected),p=n,window.sessionStorage.setItem("resultsLayoutView",n)};if(p===m){const a=[...Y].find(n=>n.dataset.resultsLayoutSwitch===m);a&&rt(a)}Y.forEach(a=>{a.addEventListener("click",n=>rt(n.currentTarget))});const Q=s.querySelectorAll(o.productViewSwitchButton),st=a=>{const n=a.dataset.resultsProductViewSwitch,y=Array.from(r.classList).filter(l=>l.includes("product-view--"));r.classList.add(`product-view--${n}`),r.classList.remove(...y),Q.forEach(l=>{l.setAttribute("aria-pressed","false"),l.removeAttribute("disabled"),l.classList.remove(h.isSelected)}),a.setAttribute("disabled","disabled"),a.setAttribute("aria-pressed","true"),a.classList.add(h.isSelected),P=n,window.sessionStorage.setItem("resultsProductView",n)};if(P===k){const a=[...Q].find(n=>n.dataset.resultsProductViewSwitch===k);a&&st(a)}Q.forEach(a=>{a.addEventListener("click",n=>st(n.currentTarget))})}function _(){const u=s.querySelector(o.filterPriceRangeSlider),b=s.querySelector(o.filterPriceRangeMin),S=s.querySelector(o.filterPriceRangeMax);!u||!b||!S||(u.addEventListener("input",A=>{const{valueMin:O,valueMax:K}=A.detail;b.value=O,S.value=K}),u.addEventListener("change",()=>{if(d.requestSubmit)return d.requestSubmit();const A=d.querySelector('[type="submit"]');A&&A.click()}))}function x(){const u=s.querySelector(o.resultsSortToggle),b=s.querySelector(o.resultsSortList);if(!u||!b)return;const S=()=>{b.classList.toggle(h.isHidden),b.classList.contains(h.isHidden)?b.style.height=0:b.style.height=`${b.scrollHeight}px`,u.classList.toggle(h.sortIsVisible)};u.addEventListener("click",S),window.addEventListener("results-filter-sort:toggle-sort",S)}function J(){const u=b=>{document.addEventListener("swym:products-loaded",()=>{b.initializeActionButtons(o.resultsGrid)})};window.SwymCallbacks=window.SwymCallbacks||[],window.SwymCallbacks.push(u)}};export{pt as R};
