import{f as p}from"./currency-7d20dcfe.js";import{r as S}from"./theme-sections-ecef3d83.js";import{F as T}from"./index-13f72e9f.js";import{v as u}from"./variant-select-19679e99.js";const c={productSwatch:"[data-swatch-radio]",variantSelectWrapper:"[data-variant-select-wrapper]",productTitle:"[data-product-title]",productPriceWrapper:"[data-price-wrapper]",addToCart:"[data-add-to-cart]",totalPrice:"[data-total-price]",formGroups:"[data-form-group]",categoryTabsWrapper:"[data-category-tabs-wrapper]",categoryTab:"[data-category-tab]"},v="mix-and-match";var g,y,m;const b=((m=(y=(g=window.Shopify)==null?void 0:g.theme)==null?void 0:y.sections)==null?void 0:m.registered)||{},w=typeof b[v]>"u";w&&S(v,{onLoad(){const e=this.container;this.json=JSON.parse(e.querySelector("[data-json]").innerHTML),this.sliders={},this.groups={},this.categories=this.json.categories,this.activeCategory="",this.swatches=e.querySelectorAll(c.productSwatch),this.variantSelectWrappers=e.querySelectorAll(c.variantSelectWrapper),this.totalPrice=e.querySelector(c.totalPrice),this.categoryTabsWrapper=e.querySelector(c.categoryTabsWrapper),this.addToCartButton=e.querySelector(c.addToCart),this.addToCartButton.addEventListener("click",this.addToCart.bind(this)),this.initCategoryTabs(),this.initGroups(),this.initSwatches()},initCategoryTabs(){if(!this.categoryTabsWrapper||!this.categories.length)return;const e=this.categories.map(t=>`
          <li>
            <button class="mix-and-match__category-tab btn-none ${t===this.activeCategory?"active":""}" data-category-tab="${t}">
              ${t}
            </button>
          </li>
        `);this.categoryTabsWrapper.innerHTML=`
        <ul class="mix-and-match__category-tabs list-none">
          <li>
            <button class="mix-and-match__category-tab btn-none active" data-category-tab="">All</button>
          </li>
          ${e.join("")}
        </ul>
        `,this.categoryTabsWrapper.querySelectorAll(c.categoryTab).forEach(t=>t.addEventListener("click",this.updateActiveCategory.bind(this)))},updateActiveCategory(e){e.preventDefault();const a=e.target.dataset.categoryTab;if(a===this.activeCategory)return;this.activeCategory=a,this.container.querySelectorAll(c.categoryTab).forEach(r=>{r.classList.remove("active"),r.dataset.categoryTab===a&&r.classList.add("active")}),this.initGroups(),this.updateSwatchVisibility()},initGroups(){this.container.querySelectorAll(c.formGroups).forEach(a=>{var s;const t=parseInt(a.dataset.formGroup,10),r=this.activeCategory===""?this.json.groups[t]:(s=this.json.groups[t])==null?void 0:s.filter(o=>o.filter_category===this.activeCategory);if(!(r!=null&&r.length))return;const i=r[0];this.groups[t]={element:a,products:r,product:i,number:t,slider:r.length>1?this.initSlider({sliderContainer:this.container.querySelector(`[data-slider="${t}"]`),groupNumber:t,products:r}):null};const n=a.querySelector(c.variantSelectWrapper);n.innerHTML=u(i)})},initSlider({sliderContainer:e,groupNumber:a,products:t}){var s;const r=this.updateActiveProduct.bind(this),i=(s=this.groups[a])==null?void 0:s.slider;i&&(i.destroy(),e.innerHTML="");const n=t.map(o=>this.activeCategory&&o.filter_category!==this.activeCategory?"":`
          <li class="mix-and-match__slide"  data-product="${o.id}">
            <div class="mix-and-match__product">
              <p class="mix-and-match__slide-title">${o.slide.title}</p>
              <div class="mix-and-match__slide-image">
                <div class="aspect-ratio aspect-ratio--square">
                  <img src="${o.slide.image}" alt="${o.title}" width="450" height="450" loading="lazy"/>
                </div>
              </div>
            </div>
          </li>
          `);return e.innerHTML=n.join(""),new T(e,{freeScroll:!1,prevNextButtons:!0,pageDots:!1,cellAlign:"center",wrapAround:!0,imagesLoaded:!0,setGallerySize:!0,contain:!0,arrowShape:"M62.5 77.6517L34.8484 50L62.5 22.3484L65.1517 25L40.1517 50L65.1517 75L62.5 77.6517Z",on:{change(){const o=this.selectedElement.dataset.product;r({productId:o,groupNumber:a})},ready(){if(!i)return;const o=this.selectedElement.dataset.product;r({productId:o,groupNumber:a})}}})},initSwatches(){this.swatches.forEach(e=>{this.updateSwatchVisibility(),e.addEventListener("change",()=>{const a=e.value,t=e.dataset.group;!a||!t||this.updateActiveProduct({productId:a,groupNumber:t})})})},updateSwatchVisibility(){this.swatches.forEach(e=>{this.activeCategory&&e.dataset.category!==this.activeCategory?e.disabled=!0:e.disabled=!1})},addToCart(e){e.preventDefault();try{const a=this.getSelectedVariants(),t=a.filter(i=>typeof i.variant>"u");if(t.length)throw{message:window.theme.strings.products.variantSelect.emptyError,variants:t};const r=a.map(i=>({id:i.variant,quantity:1}));window.sideCart.handleAddToCartEvent(r,!0)}catch({message:a,variants:t}){t.map(i=>i.variantSelectors).flat().forEach(i=>i.throwError(a))}},getSelectedVariants(){return Object.keys(this.groups).map(e=>{const a=this.groups[e],t=[...a.element.querySelectorAll("variant-select")],r=t.map(n=>{const s=n.querySelector('input[type="radio"]:checked');return{option:n.dataset.option,value:s==null?void 0:s.value}}),i=a.product.variants.find(n=>r.every(s=>n[s.option]===s.value));return{variantSelectors:t,variant:i==null?void 0:i.id}})},updateActiveProduct({productId:e,groupNumber:a}){var h;const t=this.groups[a].products.find(l=>l.id===parseInt(e,10));if(!t)return;this.groups[a].product=t;const r=this.groups[a].slider;if((h=r.cells)!=null&&h.length){const l=r.cells.find(d=>d.element.dataset.product===e.toString());r.selectedCell!==l&&r.select(r.cells.indexOf(l))}const i=[...this.swatches].find(l=>l.value===e&&l.dataset.group===a.toString());i.checked===!1&&(i.checked=!0);const n=this.groups[a].element.querySelector(c.productTitle);if(n.innerHTML===t.title)return;n.innerHTML=t.title;const s=this.groups[a].element.querySelector(c.productPriceWrapper);s.innerHTML=`
        ${t.compare_at_price>t.price?`<span class="product__compare-at-price">
                ${p(t.compare_at_price,theme.moneyFormat)}
              </span>`:""}
        <span class="product__price">${p(t.price,theme.moneyFormat)}</span>
      `;const o=this.groups[a].element.querySelector(c.variantSelectWrapper);o.innerHTML=u(t);const f=Object.keys(this.groups).map(l=>this.groups[l].product.price).reduce((l,d)=>l+d,0);this.totalPrice.innerHTML=p(f,theme.moneyFormat)}});
