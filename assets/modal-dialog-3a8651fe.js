/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var ie=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],M=ie.join(","),oe=typeof Element>"u",R=oe?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,q=!oe&&Element.prototype.getRootNode?function(o){var e;return o==null||(e=o.getRootNode)===null||e===void 0?void 0:e.call(o)}:function(o){return o==null?void 0:o.ownerDocument},G=function o(e,t){var a;t===void 0&&(t=!0);var u=e==null||(a=e.getAttribute)===null||a===void 0?void 0:a.call(e,"inert"),s=u===""||u==="true",r=s||t&&e&&o(e.parentNode);return r},he=function(e){var t,a=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return a===""||a==="true"},ue=function(e,t,a){if(G(e))return[];var u=Array.prototype.slice.apply(e.querySelectorAll(M));return t&&R.call(e,M)&&u.unshift(e),u=u.filter(a),u},se=function o(e,t,a){for(var u=[],s=Array.from(e);s.length;){var r=s.shift();if(!G(r,!1))if(r.tagName==="SLOT"){var d=r.assignedElements(),l=d.length?d:r.children,p=o(l,!0,a);a.flatten?u.push.apply(u,p):u.push({scopeParent:r,candidates:p})}else{var T=R.call(r,M);T&&a.filter(r)&&(t||!e.includes(r))&&u.push(r);var g=r.shadowRoot||typeof a.getShadowRoot=="function"&&a.getShadowRoot(r),F=!G(g,!1)&&(!a.shadowRootFilter||a.shadowRootFilter(r));if(g&&F){var S=o(g===!0?r.children:g.children,!0,a);a.flatten?u.push.apply(u,S):u.push({scopeParent:r,candidates:S})}else s.unshift.apply(s,r.children)}}return u},ce=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},P=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||he(e))&&!ce(e)?0:e.tabIndex},me=function(e,t){var a=P(e);return a<0&&t&&!ce(e)?0:a},ye=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},le=function(e){return e.tagName==="INPUT"},ge=function(e){return le(e)&&e.type==="hidden"},we=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(a){return a.tagName==="SUMMARY"});return t},Ne=function(e,t){for(var a=0;a<e.length;a++)if(e[a].checked&&e[a].form===t)return e[a]},Te=function(e){if(!e.name)return!0;var t=e.form||q(e),a=function(d){return t.querySelectorAll('input[type="radio"][name="'+d+'"]')},u;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")u=a(window.CSS.escape(e.name));else try{u=a(e.name)}catch(r){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",r.message),!1}var s=Ne(u,e.form);return!s||s===e},Fe=function(e){return le(e)&&e.type==="radio"},Se=function(e){return Fe(e)&&!Te(e)},Ee=function(e){var t,a=e&&q(e),u=(t=a)===null||t===void 0?void 0:t.host,s=!1;if(a&&a!==e){var r,d,l;for(s=!!((r=u)!==null&&r!==void 0&&(d=r.ownerDocument)!==null&&d!==void 0&&d.contains(u)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&u;){var p,T,g;a=q(u),u=(p=a)===null||p===void 0?void 0:p.host,s=!!((T=u)!==null&&T!==void 0&&(g=T.ownerDocument)!==null&&g!==void 0&&g.contains(u))}}return s},_=function(e){var t=e.getBoundingClientRect(),a=t.width,u=t.height;return a===0&&u===0},De=function(e,t){var a=t.displayCheck,u=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=R.call(e,"details>summary:first-of-type"),r=s?e.parentElement:e;if(R.call(r,"details:not([open]) *"))return!0;if(!a||a==="full"||a==="legacy-full"){if(typeof u=="function"){for(var d=e;e;){var l=e.parentElement,p=q(e);if(l&&!l.shadowRoot&&u(l)===!0)return _(e);e.assignedSlot?e=e.assignedSlot:!l&&p!==e.ownerDocument?e=p.host:e=l}e=d}if(Ee(e))return!e.getClientRects().length;if(a!=="legacy-full")return!0}else if(a==="non-zero-area")return _(e);return!1},Ie=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var a=0;a<t.children.length;a++){var u=t.children.item(a);if(u.tagName==="LEGEND")return R.call(t,"fieldset[disabled] *")?!0:!u.contains(e)}return!0}t=t.parentElement}return!1},U=function(e,t){return!(t.disabled||G(t)||ge(t)||De(t,e)||we(t)||Ie(t))},H=function(e,t){return!(Se(t)||P(t)<0||!U(e,t))},Pe=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},Oe=function o(e){var t=[],a=[];return e.forEach(function(u,s){var r=!!u.scopeParent,d=r?u.scopeParent:u,l=me(d,r),p=r?o(u.candidates):d;l===0?r?t.push.apply(t,p):t.push(d):a.push({documentOrder:s,tabIndex:l,item:u,isScope:r,content:p})}),a.sort(ye).reduce(function(u,s){return s.isScope?u.push.apply(u,s.content):u.push(s.content),u},[]).concat(t)},de=function(e,t){t=t||{};var a;return t.getShadowRoot?a=se([e],t.includeContainer,{filter:H.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:Pe}):a=ue(e,t.includeContainer,H.bind(null,t)),Oe(a)},fe=function(e,t){t=t||{};var a;return t.getShadowRoot?a=se([e],t.includeContainer,{filter:U.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):a=ue(e,t.includeContainer,U.bind(null,t)),a},k=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return R.call(e,M)===!1?!1:H(t,e)},ke=ie.concat("iframe").join(","),K=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return R.call(e,ke)===!1?!1:U(t,e)};const Me=Object.freeze(Object.defineProperty({__proto__:null,focusable:fe,getTabIndex:P,isFocusable:K,isTabbable:k,tabbable:de},Symbol.toStringTag,{value:"Module"}));/*!
* focus-trap 7.5.3
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function ee(o,e){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);e&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(o,u).enumerable})),t.push.apply(t,a)}return t}function te(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ee(Object(t),!0).forEach(function(a){Re(o,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):ee(Object(t)).forEach(function(a){Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(t,a))})}return o}function Re(o,e,t){return e=Ce(e),e in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}function Ae(o,e){if(typeof o!="object"||o===null)return o;var t=o[Symbol.toPrimitive];if(t!==void 0){var a=t.call(o,e||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(o)}function Ce(o){var e=Ae(o,"string");return typeof e=="symbol"?e:String(e)}var ae={activateTrap:function(e,t){if(e.length>0){var a=e[e.length-1];a!==t&&a.pause()}var u=e.indexOf(t);u===-1||e.splice(u,1),e.push(t)},deactivateTrap:function(e,t){var a=e.indexOf(t);a!==-1&&e.splice(a,1),e.length>0&&e[e.length-1].unpause()}},Le=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},xe=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},j=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},je=function(e){return j(e)&&!e.shiftKey},Be=function(e){return j(e)&&e.shiftKey},re=function(e){return setTimeout(e,0)},ne=function(e,t){var a=-1;return e.every(function(u,s){return t(u)?(a=s,!1):!0}),a},x=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),u=1;u<t;u++)a[u-1]=arguments[u];return typeof e=="function"?e.apply(void 0,a):e},B=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Ke=[],ve=function(e,t){var a=(t==null?void 0:t.document)||document,u=(t==null?void 0:t.trapStack)||Ke,s=te({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:je,isKeyBackward:Be},t),r={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},d,l=function(n,i,c){return n&&n[i]!==void 0?n[i]:s[c||i]},p=function(n,i){var c=typeof(i==null?void 0:i.composedPath)=="function"?i.composedPath():void 0;return r.containerGroups.findIndex(function(v){var b=v.container,m=v.tabbableNodes;return b.contains(n)||(c==null?void 0:c.includes(b))||m.find(function(y){return y===n})})},T=function(n){var i=s[n];if(typeof i=="function"){for(var c=arguments.length,v=new Array(c>1?c-1:0),b=1;b<c;b++)v[b-1]=arguments[b];i=i.apply(void 0,v)}if(i===!0&&(i=void 0),!i){if(i===void 0||i===!1)return i;throw new Error("`".concat(n,"` was specified but was not a node, or did not return a node"))}var m=i;if(typeof i=="string"&&(m=a.querySelector(i),!m))throw new Error("`".concat(n,"` as selector refers to no known node"));return m},g=function(){var n=T("initialFocus");if(n===!1)return!1;if(n===void 0||!K(n,s.tabbableOptions))if(p(a.activeElement)>=0)n=a.activeElement;else{var i=r.tabbableGroups[0],c=i&&i.firstTabbableNode;n=c||T("fallbackFocus")}if(!n)throw new Error("Your focus-trap needs to have at least one focusable element");return n},F=function(){if(r.containerGroups=r.containers.map(function(n){var i=de(n,s.tabbableOptions),c=fe(n,s.tabbableOptions),v=i.length>0?i[0]:void 0,b=i.length>0?i[i.length-1]:void 0,m=c.find(function(w){return k(w)}),y=c.slice().reverse().find(function(w){return k(w)}),N=!!i.find(function(w){return P(w)>0});return{container:n,tabbableNodes:i,focusableNodes:c,posTabIndexesFound:N,firstTabbableNode:v,lastTabbableNode:b,firstDomTabbableNode:m,lastDomTabbableNode:y,nextTabbableNode:function(O){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,I=i.indexOf(O);return I<0?C?c.slice(c.indexOf(O)+1).find(function(L){return k(L)}):c.slice(0,c.indexOf(O)).reverse().find(function(L){return k(L)}):i[I+(C?1:-1)]}}}),r.tabbableGroups=r.containerGroups.filter(function(n){return n.tabbableNodes.length>0}),r.tabbableGroups.length<=0&&!T("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(r.containerGroups.find(function(n){return n.posTabIndexesFound})&&r.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},S=function h(n){if(n!==!1&&n!==a.activeElement){if(!n||!n.focus){h(g());return}n.focus({preventScroll:!!s.preventScroll}),r.mostRecentlyFocusedNode=n,Le(n)&&n.select()}},f=function(n){var i=T("setReturnFocus",n);return i||(i===!1?!1:n)},D=function(n){var i=n.target,c=n.event,v=n.isBackward,b=v===void 0?!1:v;i=i||B(c),F();var m=null;if(r.tabbableGroups.length>0){var y=p(i,c),N=y>=0?r.containerGroups[y]:void 0;if(y<0)b?m=r.tabbableGroups[r.tabbableGroups.length-1].lastTabbableNode:m=r.tabbableGroups[0].firstTabbableNode;else if(b){var w=ne(r.tabbableGroups,function(V){var z=V.firstTabbableNode;return i===z});if(w<0&&(N.container===i||K(i,s.tabbableOptions)&&!k(i,s.tabbableOptions)&&!N.nextTabbableNode(i,!1))&&(w=y),w>=0){var O=w===0?r.tabbableGroups.length-1:w-1,C=r.tabbableGroups[O];m=P(i)>=0?C.lastTabbableNode:C.lastDomTabbableNode}else j(c)||(m=N.nextTabbableNode(i,!1))}else{var I=ne(r.tabbableGroups,function(V){var z=V.lastTabbableNode;return i===z});if(I<0&&(N.container===i||K(i,s.tabbableOptions)&&!k(i,s.tabbableOptions)&&!N.nextTabbableNode(i))&&(I=y),I>=0){var L=I===r.tabbableGroups.length-1?0:I+1,Q=r.tabbableGroups[L];m=P(i)>=0?Q.firstTabbableNode:Q.firstDomTabbableNode}else j(c)||(m=N.nextTabbableNode(i))}}else m=T("fallbackFocus");return m},E=function(n){var i=B(n);if(!(p(i,n)>=0)){if(x(s.clickOutsideDeactivates,n)){d.deactivate({returnFocus:s.returnFocusOnDeactivate});return}x(s.allowOutsideClick,n)||n.preventDefault()}},Y=function(n){var i=B(n),c=p(i,n)>=0;if(c||i instanceof Document)c&&(r.mostRecentlyFocusedNode=i);else{n.stopImmediatePropagation();var v,b=!0;if(r.mostRecentlyFocusedNode)if(P(r.mostRecentlyFocusedNode)>0){var m=p(r.mostRecentlyFocusedNode),y=r.containerGroups[m].tabbableNodes;if(y.length>0){var N=y.findIndex(function(w){return w===r.mostRecentlyFocusedNode});N>=0&&(s.isKeyForward(r.recentNavEvent)?N+1<y.length&&(v=y[N+1],b=!1):N-1>=0&&(v=y[N-1],b=!1))}}else r.containerGroups.some(function(w){return w.tabbableNodes.some(function(O){return P(O)>0})})||(b=!1);else b=!1;b&&(v=D({target:r.mostRecentlyFocusedNode,isBackward:s.isKeyBackward(r.recentNavEvent)})),S(v||r.mostRecentlyFocusedNode||g())}r.recentNavEvent=void 0},be=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;r.recentNavEvent=n;var c=D({event:n,isBackward:i});c&&(j(n)&&n.preventDefault(),S(c))},W=function(n){if(xe(n)&&x(s.escapeDeactivates,n)!==!1){n.preventDefault(),d.deactivate();return}(s.isKeyForward(n)||s.isKeyBackward(n))&&be(n,s.isKeyBackward(n))},Z=function(n){var i=B(n);p(i,n)>=0||x(s.clickOutsideDeactivates,n)||x(s.allowOutsideClick,n)||(n.preventDefault(),n.stopImmediatePropagation())},X=function(){if(r.active)return ae.activateTrap(u,d),r.delayInitialFocusTimer=s.delayInitialFocus?re(function(){S(g())}):S(g()),a.addEventListener("focusin",Y,!0),a.addEventListener("mousedown",E,{capture:!0,passive:!1}),a.addEventListener("touchstart",E,{capture:!0,passive:!1}),a.addEventListener("click",Z,{capture:!0,passive:!1}),a.addEventListener("keydown",W,{capture:!0,passive:!1}),d},J=function(){if(r.active)return a.removeEventListener("focusin",Y,!0),a.removeEventListener("mousedown",E,!0),a.removeEventListener("touchstart",E,!0),a.removeEventListener("click",Z,!0),a.removeEventListener("keydown",W,!0),d},pe=function(n){var i=n.some(function(c){var v=Array.from(c.removedNodes);return v.some(function(b){return b===r.mostRecentlyFocusedNode})});i&&S(g())},$=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(pe):void 0,A=function(){$&&($.disconnect(),r.active&&!r.paused&&r.containers.map(function(n){$.observe(n,{subtree:!0,childList:!0})}))};return d={get active(){return r.active},get paused(){return r.paused},activate:function(n){if(r.active)return this;var i=l(n,"onActivate"),c=l(n,"onPostActivate"),v=l(n,"checkCanFocusTrap");v||F(),r.active=!0,r.paused=!1,r.nodeFocusedBeforeActivation=a.activeElement,i==null||i();var b=function(){v&&F(),X(),A(),c==null||c()};return v?(v(r.containers.concat()).then(b,b),this):(b(),this)},deactivate:function(n){if(!r.active)return this;var i=te({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},n);clearTimeout(r.delayInitialFocusTimer),r.delayInitialFocusTimer=void 0,J(),r.active=!1,r.paused=!1,A(),ae.deactivateTrap(u,d);var c=l(i,"onDeactivate"),v=l(i,"onPostDeactivate"),b=l(i,"checkCanReturnFocus"),m=l(i,"returnFocus","returnFocusOnDeactivate");c==null||c();var y=function(){re(function(){m&&S(f(r.nodeFocusedBeforeActivation)),v==null||v()})};return m&&b?(b(f(r.nodeFocusedBeforeActivation)).then(y,y),this):(y(),this)},pause:function(n){if(r.paused||!r.active)return this;var i=l(n,"onPause"),c=l(n,"onPostPause");return r.paused=!0,i==null||i(),J(),A(),c==null||c(),this},unpause:function(n){if(!r.paused||!r.active)return this;var i=l(n,"onUnpause"),c=l(n,"onPostUnpause");return r.paused=!1,i==null||i(),F(),X(),A(),c==null||c(),this},updateContainerElements:function(n){var i=[].concat(n).filter(Boolean);return r.containers=i.map(function(c){return typeof c=="string"?a.querySelector(c):c}),r.active&&F(),A(),this}},d.updateContainerElements(e),d};const qe=Object.freeze(Object.defineProperty({__proto__:null,createFocusTrap:ve},Symbol.toStringTag,{value:"Module"}));class Ge{constructor(e,t){if(!e)return;this.options=typeof t=="object"?t:null;const{modalId:a,triggerEl:u,toggleEl:s,focusEl:r,timerReveal:d}=this.options,l=localStorage.getItem(`timerPopup-${a}`);if(!a)throw new Error("Missing modalId");const p=e.querySelectorAll(`[data-modal-close="modal-${a}"]`);this.modalIsOpen=!1;const T=ve(e,{initialFocus:r,allowOutsideClick:!0}),g=()=>{e.setAttribute("aria-modal",!0),e.removeAttribute("aria-hidden"),e.classList.add("modal--visible"),document.documentElement.classList.add("modal-js--open"),document.documentElement.classList.add(`${a}-modal-js--open`),setTimeout(()=>{T.activate()},500),this.modalIsOpen=!0,s==null||s.forEach(f=>f.classList.add("is-active")),u==null||u.forEach(f=>f.classList.add("is-active"))},F=()=>{e.removeAttribute("aria-modal"),e.setAttribute("aria-hidden",!0),e.classList.remove("modal--visible"),T.deactivate(),this.modalIsOpen=!1,s==null||s.forEach(f=>f.classList.remove("is-active")),u==null||u.forEach(f=>f.classList.remove("is-active")),document.documentElement.classList.remove(`${a}-modal-js--open`),document.querySelector(".modal--visible")||document.documentElement.classList.remove("modal-js--open")},S=()=>{this.modalIsOpen?F():g()};if(e.addEventListener("click",f=>{f.target.closest(".modal__dialog")||F()}),document.documentElement.addEventListener("click",f=>{f.target.closest(".modal__dialog")||!this.modalIsOpen||(a!=="newsletter-popup"&&(f.preventDefault(),f.stopPropagation()),F())},{capture:!0}),window.addEventListener("closeModal",()=>{F()}),s==null||s.forEach(f=>{f.addEventListener("click",D=>{D.preventDefault(),S()})}),u==null||u.forEach(f=>{f.addEventListener("click",D=>{D.preventDefault(),g()})}),typeof d=="number"&&window.localStorage){let f=new Date;f=f.setHours(f.getHours()),(!l||l<=f)&&window.setTimeout(()=>{g()},d)}p==null||p.forEach(f=>{f.addEventListener("click",D=>{if(D.preventDefault(),F(),d&&window.localStorage&&a){if(l>new Date)return;let E=new Date;E=E.setHours(E.getHours()+24),localStorage.setItem(`timerPopup-${a}`,E)}})})}}export{Ge as M,qe as f,Me as i};
